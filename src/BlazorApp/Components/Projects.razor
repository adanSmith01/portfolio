<section class="light" id="projects">
    <h2 class="title-content">Proyectos</h2>
    <div class="projects-container">
    @if (projects is null)
    {
        <p><em>Loading...</em></p>
    }
    else
    {
        <div class="container">
            @foreach (var project in projects)
            {
                <div class="content-project">
                    @if(project.ProjectImage != null)
                    {
                        <figure>
                            <img src="@project.ProjectImage.Src" alt="@project.ProjectImage.Alt"/>
                        </figure>
                    }
                    <div class="box" key="@project.Title">
                        <a href="@project.Url" target="_blank" rel="noopener noreferrer" title="Ir a repositorio de Github">
                            <h3>@project.Title</h3>
                        </a>
                        <p class="small">@project.Description</p>
                        <ul id="list-tech-project">
                            @foreach(var tech in project.Technologies)
                            {
                                <li>@tech</li>
                            }
                        </ul>
                    </div>
                </div>
            }
        </div>
    }
    </div>
</section>

@code {
    [Parameter, EditorRequired]
    public required HttpClient Http { get; set; }

    [Parameter, EditorRequired]
    public required HeroImageService HeroImageService { get; set; }

    private List<Project>? projects;
    private HeroImage? hero;

    protected override async Task OnInitializedAsync()
    {
        projects = await Http.GetFromJsonAsync<List<Project>>("sample-data/projects.json");
        hero = await HeroImageService.GetHeroAsync(img => img.Name is "portfolio");
    }
}
